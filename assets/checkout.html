<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Shop Checkout</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .section { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .error { color: red; display: none; font-size: 0.9em; } /* UI Rule: Red errors */
        .success { color: green; display: none; font-weight: bold; }
        label { display: block; margin-top: 10px; }
        button#pay-now-btn { background-color: green; color: white; padding: 10px 20px; border: none; cursor: pointer; margin-top: 20px; } /* UI Rule: Green button */
        button#apply-coupon { margin-top: 5px; }
    </style>
</head>
<body>

    <h1>Complete Your Order</h1>

    <div class="section" id="cart-summary">
        <h3>Cart Summary</h3>
        <div class="item">
            <span>Wireless Headphones</span> - $100
            <input type="number" id="qty-1" value="1" min="1">
        </div>
        <div class="item">
            <span>Mechanical Keyboard</span> - $50
            <input type="number" id="qty-2" value="1" min="1">
        </div>
        <br>
        <label for="discount-code">Discount Code:</label>
        <input type="text" id="discount-code" placeholder="Enter code">
        <button id="apply-coupon" onclick="applyDiscount()">Apply</button>
        <p id="discount-message"></p>

        <h4>Total: $<span id="total-price">150</span></h4>
    </div>

    <div class="section" id="user-details">
        <h3>Shipping Details</h3>
        
        <label for="full-name">Full Name:</label>
        <input type="text" id="full-name" required>
        <span id="error-name" class="error">Name is required.</span>

        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <span id="error-email" class="error">Invalid email address.</span>

        <label>Shipping Method:</label>
        <input type="radio" name="shipping" id="shipping-standard" value="standard" checked onchange="updateTotal()"> Standard (Free)
        <input type="radio" name="shipping" id="shipping-express" value="express" onchange="updateTotal()"> Express ($10)

        <label>Payment Method:</label>
        <input type="radio" name="payment" id="payment-card" value="card" checked> Credit Card
        <input type="radio" name="payment" id="payment-paypal" value="paypal"> PayPal
    </div>

    <button id="pay-now-btn" onclick="validateAndPay()">Pay Now</button>
    <p id="success-message" class="success">Payment Successful!</p>

    <script>
        let baseTotal = 150;
        let discount = 0;
        let shipping = 0;

        function updateTotal() {
            // Check shipping
            if (document.getElementById('shipping-express').checked) {
                shipping = 10;
            } else {
                shipping = 0;
            }
            
            // Calculate final
            let finalTotal = (baseTotal * (1 - discount)) + shipping;
            document.getElementById('total-price').innerText = finalTotal.toFixed(2);
        }

        function applyDiscount() {
            const code = document.getElementById('discount-code').value;
            const msg = document.getElementById('discount-message');
            
            // Business Rule: SAVE15 gives 15% off
            if (code === 'SAVE15') {
                discount = 0.15;
                msg.innerText = "Discount Applied: 15% Off";
                msg.style.color = "green";
            } else {
                discount = 0;
                msg.innerText = "Invalid Code";
                msg.style.color = "red";
            }
            updateTotal();
        }

        function validateAndPay() {
            let isValid = true;
            
            // Validate Name
            const name = document.getElementById('full-name').value;
            if (!name) {
                document.getElementById('error-name').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('error-name').style.display = 'none';
            }

            // Validate Email
            const email = document.getElementById('email').value;
            if (!email || !email.includes('@')) {
                document.getElementById('error-email').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('error-email').style.display = 'none';
            }

            if (isValid) {
                document.getElementById('success-message').style.display = 'block';
            }
        }
    </script>
</body>
</html>